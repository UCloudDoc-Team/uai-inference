

# 产品定价

# 价格计算方法
UAI-Inference 产品目前为按需计费模式(后付费)。

UAI-Inference 有两类节点：
  * **弹性集群**，该集群使用的计算资源为共享型资源，可以提供海量计算资源。
  * **独占性集群**，该集群使用的计算资源为独占型资源，充分保障算力的隔离性。

## 计费模式
### 概念
**节点\*时**，基础计量单位，即一个节点运行1个小时时间
**基准算力单元**，计费的最小单位，对应一定的算力。

### 弹性集群计费模式
UAI-Inference 弹性集群的计费将按照**节点\*时**的方式收费，由于时共享型资源，系统实际将根据推理请求计算所消耗的节点\*时来计费，**计费时间精确到分钟**。
弹性集群的基础计算单元为1个**基准算力单元**，其对应为 **1核1GB 的计算资源**，1个基准单元的**节点\*时** 收费为0.04元，目前支持的计算节点类型如下：

| 基准配置        | 具体配置 | 节点\*时价格 |
| --------------- | -------- | ------------ |
| 1个基准算力单元 | 1核1GB   | 0.04元       |
| 2个基准算力单元 | 2核2GB   | 0.08元       |
| 4个基准算力单元 | 4核4GB   | 0.16元       |
| 8个基准算力单元 | 8核8GB   | 0.32元       |

#### 计费公式
计费采取日结的方式，具体公式如下：

  - 总价格 = 当日请求平均值 X 当日请求次数 X 节点\*时单价
  - 如果一个在线服务APP处于激活状态，且当日的计算消耗时间 < 1 节点\*时，我们仍将按照 1 节点\*时 收费

注：当日请求平均值的计算将自动剔除请求延时的噪点。

#### 计费案例
假设部署了一个UAI Inference 在线服务APP，采用弹性集群模式，选择的是8个基准算力单元的节点，任务执行了4天：

|       | 平均延时 | 请求次数 | 节点\*时价格 | 当日结算公式           | 当日结算费用 |
| ----- | -------- | -------- | ------------ | ---------------------- | ------------ |
| Day 0 | 2s       | 1000     | 0.32元       | 0.32                   | 0.32 元      |
| Day 1 | 2s       | 120w     | 0.32元       | 2\*120w/3600 \* 0.32   | 213.33元     |
| Day 2 | 1.9s     | 90w      | 0.32元       | 1.9\*90w/3600 \* 0.32  | 152元        |
| Day 3 | 2.1s     | 100w     | 0.32元       | 2.1\*100w/3600 \* 0.32 | 186.67元     |

### 独占型集群计费模式
UAI Inference 独占型集群的计费将按照**节点\*时**的方式收费，由于是独占型资源，系统将根据APP实际所占用的节点的使用时间总和来计算节点\*时，**计费时间精确到分钟**。其APP独占型集群具有以下特点：

  * 用户可以在操作界面一键完成APP节点集群的扩容和缩容，**计时精确到分钟**。
  * 每个APP最小的资源数量为 2 个独占型节点。**系统将自动做高可用部署**，因此需要2+个节点。
  * 独占节点的扩容时间可能会持续几分钟

独占型集群目前支持的独占型计算资源及单价如下：

| 计算资源类型        | 最小配置数量 | 节点\*时价格 |
| ------------------- | ------------ | ------------ |
| 1\*P40 GPU, 4核16GB | 2            | 5.1元/小时   |

独占型服务在UAI-Inference平台中存在多种状态，其中未激活和已激活状态是收费的

| 状态   | 是否计费 | 说明                                                         |
| ------ | -------- | ------------------------------------------------------------ |
| 部署中 | 否       | 在线服务任务正在初始化                                       |
| 未激活 | 是       | 在线服务任务已经初始化完毕，等待客户激活(点击停止按钮后，任务状态也会回到未激活） |
| 已激活 | 是       | 在线服务任务正在正常服务                                     |
| 错误   | 否       | 在线服务任务部署错误                                         |
| 已删除 | 否       | 训练任务已完成(前端界面不显示)                               |

#### 计费公式
计费采取日结的方式，具体公式如下：

 - 总价格 = 当日节点总占用时间 X 节点\*时单价

#### 计费案例
假设部署了一个UAI Inference 在线服务APP，采用独占型集群模式，选择的是1\*P40型节点，任务执行了3天：

|       | 最少节点数 | 最大节点数 | 累计节点占用时间 | 节点\*时价格 | 当日结算公式 | 当日结算费用 |
| ----- | ---------- | ---------- | ---------------- | ------------ | ------------ | ------------ |
| Day 0 | 2          | 2          | 48               | 5.1元        | 48 * 5.1     | 244.8 元     |
| Day 1 | 2          | 10         | 72               | 5.1元        | 72 * 5.1     | 367.2元      |
| Day 2 | 2          | 8          | 64               | 5.1元        | 64 * 5.1     | 326.4元      |

# 查看消费情况

在已运行任务的概览页面，可以看到付费信息，具体的账单消费等可在账单计费查看。
![](ai/uai-inference/images/price/infer付费信息.jpg)

